<div class="container mt-5" style="max-width: 400px">
  <div class="card shadow-sm p-4">
    <h2 class="mb-4 text-center">Connexion</h2>
    <form #loginForm="ngForm" (ngSubmit)="onSubmit(loginForm)" novalidate>
      <!-- Email -->
      <div class="mb-3">
        <label for="email" class="form-label fw-semibold">Adresse email</label>
        <input
          type="email"
          class="form-control"
          id="email"
          name="email"
          [(ngModel)]="email"
          #emailRef="ngModel"
          required
          email
          minlength="5"
          maxlength="255"
          placeholder="exemple@domaine.com"
        />
        @if (emailRef.errors) {
        <div class="text-danger mt-1 small">
          @if (emailRef.errors['required']) {
          <div>Email requis</div>
          } @if (emailRef.errors['email']) {
          <div>Format d'email invalide (ex: exemple@domaine.com)</div>
          } @if (emailRef.errors['maxlength']) {
          <div>L'email est trop long (255 caractères maximum).</div>
          } @if (emailRef.errors['minlength']) {
          <div>L'email est trop court (5 caractères minimum).</div>
          }
        </div>
        }
      </div>

      <!-- Password -->
      <div class="mb-4">
        <label for="password" class="form-label fw-semibold">Mot de passe</label>
        <input
          type="password"
          class="form-control"
          id="password"
          name="password"
          [(ngModel)]="password"
          #passwordRef="ngModel"
          required
          password
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$"
          minlength="6"
          maxlength="255"
          placeholder="Votre mot de passe"
        />
        @if (passwordRef.errors) {
        <div class="text-danger mt-1 small">
          @if (passwordRef.errors['required']) {
          <div>Le mot de passe est requis.</div>
          } @if (passwordRef.errors['minlength']) {
          <div>Le mot de passe doit contenir au moins 6 caractères.</div>
          } @if (passwordRef.errors['maxlength']) {
          <div>Le mot de passe est trop long (255 caractères maximum).</div>
          } @if (passwordRef.errors['pattern']) {
          <div>
            Le mot de passe doit contenir au moins une majuscule, une minuscule et un chiffre.
          </div>
          }
        </div>
        }
      </div>
      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary w-100 fw-semibold" [disabled]="!loginForm.valid">
        Se connecter
      </button>
      @if (formSubmitted) {
      <div class="alert alert-success mt-3 text-center">Connexion réussie !</div>
      } @else if (loginForm.submitted && loginForm.invalid) {
      <div class="alert alert-danger mt-3 text-center">Le formulaire contient des erreurs.</div>
      }
      @else {
      <div class="alert alert-info mt-3 text-center">Veuillez remplir le formulaire.</div>
      }
    </form>
    <div class="mt-3 text-center text-muted small">
      Form submitted ? {{ loginForm.submitted }} <br />
      Form valid ? {{ loginForm.valid }} <br />
      Form invalid ? {{ loginForm.invalid }}
    </div>
  </div>
</div>
